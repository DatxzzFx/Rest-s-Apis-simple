<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rest's Apis Simple</title>

  <!-- Tailwind + Font persis snippet Anda -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono:wght@400;700&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            'mono': ['Ubuntu Mono', 'monospace'],
            'sans': ['Inter', 'system-ui', 'sans-serif']
          },
          animation: {
            'fade-in': 'fadeIn 0.4s ease-in-out',
            'spin-fast': 'spin 0.6s linear infinite'
          },
          keyframes: { fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } } }
        }
      }
    }
  </script>
  <style>.smooth { transition: all 0.3s ease; }</style>
</head>

<body class="bg-gray-100 text-gray-800 font-sans">
  <nav class="bg-white border-b border-gray-200 shadow-sm">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <h1 class="text-lg font-semibold text-indigo-600 flex items-center space-x-2">
        <i class="fa-solid fa-code text-indigo-500"></i>
        <span>My Rest's Apis</span>
      </h1>
      <button id="aboutBtn" class="text-sm font-medium text-gray-600 hover:text-indigo-600 smooth">My Development</button>
    </div>
  </nav>

  <div class="max-w-2xl mx-auto p-6 mt-8">
    <h1 class="text-2xl font-semibold mb-4">All-in-One Downloader</h1>
    <div class="bg-white border border-gray-200 rounded-xl shadow-sm p-5">
      <div class="flex items-center mb-4">
        <span class="bg-green-100 text-green-700 text-xs font-bold px-2 py-0.5 rounded-md border border-green-300 mr-2">GET</span>
        <code class="bg-gray-100 text-gray-800 border border-gray-300 rounded-md px-2 py-1 text-sm font-mono">/api/aio</code>
      </div>
      <input id="url" type="text" placeholder="https://youtube.com/..."
             class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 smooth" />
      <button id="exec"
              class="mt-3 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed smooth">
        <span id="btnText">Execute</span>
        <i id="btnLoader" class="fa-solid fa-spinner ml-2 hidden animate-spin-fast"></i>
      </button>
      <p id="status" class="mt-4 text-sm text-gray-600"></p>
      <pre id="json" class="mt-4 bg-gray-900 text-gray-100 rounded-md p-4 overflow-x-auto text-sm font-mono opacity-0 hidden"></pre>
    </div>
  </div>

  <!-- Modal About -->
  <div id="aboutModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 smooth">
    <div class="bg-white rounded-xl shadow-lg p-6 w-80 text-center">
      <h2 class="text-lg font-semibold text-indigo-600 mb-2">My Development</h2>
      <p class="text-sm text-gray-600 mb-4">Created by <span class="font-semibold text-indigo-600">DatxzzFx</span>.<br>Connect with me below!</p>
      <div class="flex justify-center space-x-4 text-xl text-gray-600">
        <a href="https://facebook.com/DatxzzFx" target="_blank" class="hover:text-blue-600 smooth"><i class="fa-brands fa-facebook"></i></a>
      </div>
      <button id="closeModal" class="mt-5 w-full bg-indigo-600 text-white py-1.5 rounded-md hover:bg-indigo-700 smooth">Close</button>
    </div>
  </div>

  <script>
    const $ = s => document.querySelector(s);
    const execBtn = $('#exec'), btnText = $('#btnText'), btnLoader = $('#btnLoader'), status = $('#status'), jsonBox = $('#json');

    execBtn.onclick = async () => {
      const url = $('#url').value.trim();
      if (!url) return status.textContent = 'URL required';
      execBtn.disabled = true;
      btnText.textContent = 'Please wait';
      btnLoader.classList.remove('hidden');
      status.textContent = '';
      jsonBox.classList.add('hidden', 'opacity-0');

      try {
        const res = await fetch(`/api/aio?query=${encodeURIComponent(url)}`);
        const data = await res.json();
        if (!res.ok) throw new Error(data.message || 'Failed');
        status.textContent = 'Success!';
        jsonBox.textContent = JSON.stringify(data, null, 2);
        jsonBox.classList.remove('hidden');
        requestAnimationFrame(() => jsonBox.classList.add('animate-fade-in', 'opacity-100'));
      } catch (e) {
        status.textContent = 'Error: ' + e.message;
      } finally {
        execBtn.disabled = false;
        btnText.textContent = 'Execute';
        btnLoader.classList.add('hidden');
      }
    };

    const aboutBtn = $('#aboutBtn'), modal = $('#aboutModal'), closeModal = $('#closeModal');
    aboutBtn.onclick = () => modal.classList.remove('hidden');
    closeModal.onclick = () => modal.classList.add('hidden');
    window.onclick = e => { if (e.target === modal) modal.classList.add('hidden'); };
  </script>
</body>
</html>